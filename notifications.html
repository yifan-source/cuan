<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notifikasi - Cuan</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #0b0f1a; --card: #151c2c; --primary: #4a8d88; --text-dim: #94a3b8; }
        body { margin: 0; font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: white; }

        .header { padding: 20px 5%; display: flex; align-items: center; gap: 15px; background: var(--card); border-bottom: 1px solid rgba(255,255,255,0.05); position: sticky; top: 0; z-index: 1000; }
        .header a { color: white; text-decoration: none; width: 35px; height: 35px; background: rgba(255,255,255,0.05); display: flex; align-items: center; justify-content: center; border-radius: 10px; }
        .header h2 { margin: 0; font-size: 16px; font-weight: 800; letter-spacing: 1px; }

        .container { padding: 20px 5%; }
        .notif-card { background: var(--card); padding: 15px; border-radius: 18px; margin-bottom: 12px; border: 1px solid rgba(255,255,255,0.03); display: flex; gap: 15px; }
        .notif-icon { width: 45px; height: 45px; border-radius: 12px; background: rgba(74, 141, 136, 0.1); color: var(--primary); display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 18px; }
        .notif-body b { display: block; font-size: 14px; margin-bottom: 4px; color: var(--primary); }
        .notif-body p { margin: 0; font-size: 12px; color: var(--text-dim); line-height: 1.5; }
        .notif-time { font-size: 10px; color: #475569; margin-top: 8px; display: block; }
        .footer-compact {
    margin-top: 30px; /* Dikurangi */
    padding: 20px 6% 0;
    border-top: 1px solid rgba(255,255,255,0.05);
}

/* Bagian Intel dibuat menyamping/grid kecil */
.footer-intel-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    padding-bottom: 20px;
    border-bottom: 1px solid rgba(255,255,255,0.03);
}

.intel-item .tag {
    font-size: 8px;
    font-weight: 800;
    letter-spacing: 1px;
    color: var(--primary);
    display: block;
    margin-bottom: 4px;
}

.intel-item .tag.warn { color: #ef4444; }

.intel-item p {
    margin: 0;
    font-size: 10px;
    line-height: 1.4;
    color: #94a3b8;
}

/* Main Core Alignment */
.footer-main-core {
    padding-top: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.mini-nav {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 15px;
}

.mini-nav a {
    text-decoration: none;
    color: var(--primary);
    font-size: 10px;
    font-weight: 700;
    opacity: 0.8;
}

.mini-nav .dot {
    width: 3px;
    height: 3px;
    background: rgba(255,255,255,0.1);
    border-radius: 50%;
}

/* Branding Row Horizontal */
.brand-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
}

.nano-logo {
    width: 30px;
    height: 30px;
    border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.05);
}

.brand-info h4 {
    margin: 0;
    font-size: 12px;
    color: white;
}

.brand-info h4 span {
    font-weight: 400;
    color: #64748b;
    margin-left: 3px;
}

.server-status-mini {
    font-size: 7px;
    font-weight: 800;
    color: #475569;
    display: flex;
    align-items: center;
    gap: 4px;
    margin-top: 2px;
}

.live-dot {
    width: 3px;
    height: 3px;
    background: #22c55e;
    border-radius: 50%;
    box-shadow: 0 0 5px #22c55e;
}

.copyright-mini {
    font-size: 9px;
    color: rgba(255,255,255,0.15);
    margin: 5px 0 0 0;
}

    </style>
</head>
<body>
    <div class="header">
        <a href="dashboard.html"><i class="fa-solid fa-arrow-left"></i></a>
        <h2>NOTIFIKASI</h2>
    </div>

    <div class="container" id="notifList">
        <p style="text-align:center; color:var(--text-dim); margin-top:50px;">Memuat pesan...</p>
    </div>
<footer class="footer-compact">
    <div class="footer-intel-grid">
        <div class="intel-item">
            <span class="tag">GROWTH</span>
            <p>Aset pasif & limit WD meningkat tiap teman valid.</p>
        </div>
        <div class="intel-item">
            <span class="tag warn">SECURITY</span>
            <p>Anti-fraud aktif. Manipulasi berakibat banned.</p>
        </div>
    </div>

    <div class="footer-main-core">
        <div class="mini-nav">
            <a href="tos.html">Aturan</a>
            <span class="dot"></span>
            <a href="privacy.html">Privasi</a>
        </div>
        
        <div class="brand-row">
            <img src="img/logo.jpg" class="nano-logo">
            <div class="brand-info">
                <h4>Cuan<span>Network</span></h4>
                <div class="server-status-mini">
                    <span class="live-dot"></span> Cuan.js Online
                </div>
            </div>
        </div>

        <p class="copyright-mini">Â© 2024-2025 Secured System</p>
    </div>
    <div style="height: 30px;"></div>
</footer>
    <script type="module">
        import { db } from './js/firebase-config.js';
        import { collection, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const q = query(collection(db, "notifications"), orderBy("timestamp", "desc"));
        onSnapshot(q, (snap) => {
            const list = document.getElementById('notifList');
            list.innerHTML = "";
            if (snap.empty) {
                list.innerHTML = '<p style="text-align:center; color:var(--text-dim); margin-top:50px;">Tidak ada notifikasi terbaru.</p>';
                return;
            }
            snap.forEach(doc => {
                const d = doc.data();
                const time = d.timestamp ? new Date(d.timestamp.seconds * 1000).toLocaleDateString('id-ID') : 'Baru saja';
                list.innerHTML += `
                    <div class="notif-card">
                        <div class="notif-icon"><i class="fa-solid fa-bell"></i></div>
                        <div class="notif-body">
                            <b>${d.title}</b>
                            <p>${d.message}</p>
                            <span class="notif-time">${time}</span>
                        </div>
                    </div>`;
            });
            localStorage.setItem('lastReadNotif', snap.size);
        });
    </script>
</body>
</html>